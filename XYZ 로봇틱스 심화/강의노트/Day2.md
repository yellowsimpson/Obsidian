

threadë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?

`thread`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” **í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ ì•ˆì—ì„œ ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ**ì˜ˆìš”. ì¡°ê¸ˆ ë” í’€ì–´ì„œ ì„¤ëª…í•˜ë©´:

1. ë³‘ë ¬(ë™ì‹œ) ì‹¤í–‰

- í”„ë¡œê·¸ë¨ì´ ìˆœì°¨ì ìœ¼ë¡œ í•œ ì¤„ì”©ë§Œ ì‹¤í–‰ëœë‹¤ë©´, ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…(ì˜ˆ: íŒŒì¼ ë‹¤ìš´ë¡œë“œ, ë„¤íŠ¸ì›Œí¬ í†µì‹ , ì„¼ì„œ ë°ì´í„° ì½ê¸° ë“±)ì„ í•˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—…ì€ ë©ˆì¶”ê²Œ ë¼ìš”. 
- ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ë©´ ì´ëŸ° ì‘ì—…ë“¤ì„ **ë™ì‹œì— ì‹¤í–‰**ì‹œì¼œì„œ, í•œìª½ì´ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ìª½ì´ ê³„ì† ì§„í–‰ë  ìˆ˜ ìˆì–´ìš”.

2. í”„ë¡œê·¸ë¨ ì‘ë‹µì„± í–¥ìƒ

- GUI í”„ë¡œê·¸ë¨ì—ì„œ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ, ë‚´ë¶€ì—ì„œ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ê³„ì‚°ì„ ë©”ì¸ ìŠ¤ë ˆë“œì—ì„œ ì²˜ë¦¬í•˜ë©´ UIê°€ "ë©ˆì¶˜ ê²ƒì²˜ëŸ¼" ë³´ì—¬ìš”.
- ì´ ê³„ì‚°ì„ **ë³„ë„ì˜ ìŠ¤ë ˆë“œ**ë¡œ ë„˜ê¸°ë©´, ë©”ì¸ ìŠ¤ë ˆë“œëŠ” ê³„ì† UI ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•´ì„œ í”„ë¡œê·¸ë¨ì´ ëŠê¸°ì§€ ì•Šê³  ë§¤ë„ëŸ½ê²Œ ë°˜ì‘í•  ìˆ˜ ìˆì–´ìš”.

3. ë©€í‹°ì½”ì–´ CPU í™œìš©

- CPUê°€ ì½”ì–´ê°€ ì—¬ëŸ¬ ê°œì¸ ê²½ìš°, ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ë©´ **ì—¬ëŸ¬ ì½”ì–´ì—ì„œ ë³‘ë ¬ ì‹¤í–‰**ì´ ê°€ëŠ¥í•´ì ¸ ì„±ëŠ¥ì´ í–¥ìƒë¼ìš”.
- íŠ¹íˆ C, C++, Java ê°™ì€ ì–¸ì–´ì—ì„œëŠ” ì—°ì‚°ëŸ‰ì´ í° ì‘ì—…ì„ ë‚˜ëˆ  ìŠ¤ë ˆë“œë³„ë¡œ ì²˜ë¦¬í•˜ë©´ ì‹¤í–‰ ì†ë„ê°€ í›¨ì”¬ ë¹¨ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.  
    (ë‹¨, íŒŒì´ì¬ì€ GIL(Global Interpreter Lock) ë•Œë¬¸ì— CPU ì—°ì‚°ì—ì„œëŠ” ì™„ì „ ë³‘ë ¬ ì‹¤í–‰ì´ ì•ˆ ë˜ì§€ë§Œ, I/O ì‘ì—…ì—ëŠ” íš¨ê³¼ì ì„)
    
4. êµ¬ì¡°ì  ì¥ì 

- ì½”ë“œ êµ¬ì¡°ë¥¼ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆì–´ìš”.  
    ì˜ˆë¥¼ ë“¤ì–´ "ì„¼ì„œ ì½ê¸° â†’ ì œì–´ â†’ í†µì‹ "ì„ í•œ ìŠ¤ë ˆë“œì—ì„œ ìˆœì„œëŒ€ë¡œ ëŒë¦¬ëŠ” ëŒ€ì‹ ,  
    **ì„¼ì„œ ì½ê¸° ìŠ¤ë ˆë“œ / ì œì–´ ìŠ¤ë ˆë“œ / í†µì‹  ìŠ¤ë ˆë“œ**ë¡œ ë‚˜ëˆ„ë©´ ê° ê¸°ëŠ¥ì´ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰¬ì›Œì ¸ìš”.
    
ğŸ‘‰ ìš”ì•½  
ìŠ¤ë ˆë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” **ë™ì‹œì— ì—¬ëŸ¬ ì‘ì—…ì„ ì²˜ë¦¬í•´ì„œ í”„ë¡œê·¸ë¨ì˜ ì†ë„ì™€ ì‘ë‹µì„±ì„ ë†’ì´ê³ , ë©€í‹°ì½”ì–´ë¥¼ í™œìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸**ì´ì—ìš”.


ì„±ëŠ¥ì„ ë†’ì´ëŠ” ê³¼ì •ì—ì„œ 
1. lifecycle -> nodeì—ëŠ” lifecycleì´ ìˆë‹¤.
2. thread
3. í”ŒëŸ¬ê·¸ì¸
4. ë™ê¸°ì‹/ë¹„ë™ê¸°ì‹
5. í†µì‹ ì€ ë­˜ ì§œ ë´¤ëŠ”ì§€
6. ì„œë²„ í´ë¼ì´ì–¸ë“œ ë°©ë²•ì´ ë­”ì§€
7. tcp/ip ì°¨ì´ì ì´ ë­”ì§€
ì·¨ì—… ë©´ì ‘ì—ì„œ ë¬¼ì–´ë´„

ë“±ì— ëŒ€í•´ì„œ ê³ ë ¤í•´ë³¸ë‹¤.

- topic
- service
- node
ì˜ ì°¨ì´ì  ì˜ ì•Œì•„ì•¼ë˜


í´ë¼ì´ì–¸ë“œê°€ ë™ì‘í• ë ¤ë©´ ì„œë²„ê°€ ë ˆë””(ë™ì‘) ìƒíƒœì— ìˆì–´ì•¼ëœë‹¤.
ì•¡ì…˜ ì„œë²„ ë§Œë“¤ê³ 
ì•¡ì…˜ í´ë¼ì´ì–¸íŠ¸ ë§Œë“¤ê³ 
ë™ì‘ë˜ëŠ”ì§€ í™•ì¸



ì¸í„°í˜ì´ìŠ¤ ë§Œë“¤ë•ŒëŠ” í•­ìƒ cmakeë¡œ ë§Œë“¤ì–´ì•¼ëœë‹¤.

![[ì‹¤ìŠµ ì´ë¯¸ì§€.png]]




- ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤
```python
import rclpy
from rclpy.node import Node
from my_interfaces_pkg.srv import CustomService
								# ì§ì ‘ ì •ì˜í•œ ì„œë¹„ìŠ¤ íƒ€ì…

class CustomServiceServer(Node):
    def __init__(self):
        super().__init__('custom_service_server')
        self.srv = self.create_service(CustomService, 'custom_service', self.service_callback)

    def service_callback(self, request, response):
        response.output = f"Received: {request.input}" # -> input
	        self.get_logger().info(f'Input: {request.input}, Output: {response.output}') # -> output
        return response
        #ì—¬ê¸°ì— ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ë„£ìœ¼ ì£¼ë©´ ë¨
		#        


def main(args=None):
    rclpy.init(args=args)
    node = CustomServiceServer()
    rclpy.spin(node)
    rclpy.shutdown()

if __name__ == '__main__':
    main()
```



![[ì‹¤ìŠµ ì‚¬ì§„.png]]

